<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>O2: OSC Interoperation</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="o2.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">O2<span id="projectnumber">&#160;2.0</span>
   </div>
   <div id="projectbrief">A communication protocol for interactive music and media applications.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">OSC Interoperation</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga0ec6ca967524276cf0d18c94dcc37268"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__returncodes.html#gae9a85a9a12082ae659af9d047d6d63c9">O2err</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__oscinterop.html#ga0ec6ca967524276cf0d18c94dcc37268">o2_osc_port_new</a> (const char *service_name, int port_num, int tcp_flag)</td></tr>
<tr class="memdesc:ga0ec6ca967524276cf0d18c94dcc37268"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a port to receive OSC messages.  <a href="group__oscinterop.html#ga0ec6ca967524276cf0d18c94dcc37268">More...</a><br /></td></tr>
<tr class="separator:ga0ec6ca967524276cf0d18c94dcc37268"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6ad4dcc61ec1510c5bfb46e07771850d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__returncodes.html#gae9a85a9a12082ae659af9d047d6d63c9">O2err</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__oscinterop.html#ga6ad4dcc61ec1510c5bfb46e07771850d">o2_osc_port_free</a> (int port_num)</td></tr>
<tr class="memdesc:ga6ad4dcc61ec1510c5bfb46e07771850d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Remove a port receiving OSC messages.  <a href="group__oscinterop.html#ga6ad4dcc61ec1510c5bfb46e07771850d">More...</a><br /></td></tr>
<tr class="separator:ga6ad4dcc61ec1510c5bfb46e07771850d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga470eed27a2c13bccf86963e7178d5ef8"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__returncodes.html#gae9a85a9a12082ae659af9d047d6d63c9">O2err</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__oscinterop.html#ga470eed27a2c13bccf86963e7178d5ef8">o2_osc_delegate</a> (const char *service_name, const char *ip, int port_num, int tcp_flag)</td></tr>
<tr class="memdesc:ga470eed27a2c13bccf86963e7178d5ef8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a service that forwards O2 messages to an OSC server.  <a href="group__oscinterop.html#ga470eed27a2c13bccf86963e7178d5ef8">More...</a><br /></td></tr>
<tr class="separator:ga470eed27a2c13bccf86963e7178d5ef8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga34537bc20e5ea607f28da63867452284"><td class="memItemLeft" align="right" valign="top">uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__oscinterop.html#ga34537bc20e5ea607f28da63867452284">o2_osc_time_offset</a> (uint64_t offset)</td></tr>
<tr class="memdesc:ga34537bc20e5ea607f28da63867452284"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the OSC time offset.  <a href="group__oscinterop.html#ga34537bc20e5ea607f28da63867452284">More...</a><br /></td></tr>
<tr class="separator:ga34537bc20e5ea607f28da63867452284"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga470eed27a2c13bccf86963e7178d5ef8" name="ga470eed27a2c13bccf86963e7178d5ef8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga470eed27a2c13bccf86963e7178d5ef8">&#9670;&nbsp;</a></span>o2_osc_delegate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__returncodes.html#gae9a85a9a12082ae659af9d047d6d63c9">O2err</a> o2_osc_delegate </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>service_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>ip</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>port_num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>tcp_flag</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a service that forwards O2 messages to an OSC server. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">service_name</td><td>The o2 service name without a '/' prefix. </td></tr>
    <tr><td class="paramname">ip</td><td>The ip address of the osc server. </td></tr>
    <tr><td class="paramname">port_num</td><td>The port number of the osc server. </td></tr>
    <tr><td class="paramname">tcp_flag</td><td>Send OSC message via TCP protocol, in which case port_num is the TCP server port, not a connection.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="group__returncodes.html#ggae9a85a9a12082ae659af9d047d6d63c9a68055f2c93d5f18c40ce06c0569ab3f6" title="function was successful">O2_SUCCESS</a> if success, <a class="el" href="group__returncodes.html#ggae9a85a9a12082ae659af9d047d6d63c9af3cd38a1ac5bca4865c3f0c7586ab0c8" title="a non-specific error occurred.">O2_FAIL</a> if not.</dd></dl>
<p>If <code>tcp_flag</code> is set, a TCP connection will be established with the OSC server. When the created service receives any O2 messages, it will send the message to the OSC server. If the incoming message has a timestamp for some future time, the message will be held until that time, then sent to the OSC server. (Ideally, O2 could convert the message to an OSC timestamped bundle and send it immediately to achieve precise forward-synchronous timing, but this requires clock synchronization with the OSC server, which is normally unimplemented.)</p>
<p >If this is a tcp connection, close it by calling <a class="el" href="group__basics.html#ga74e8a97f87c01cf86fe6054097709bff" title="Remove a local service.">o2_service_free</a>. </p>

</div>
</div>
<a id="ga6ad4dcc61ec1510c5bfb46e07771850d" name="ga6ad4dcc61ec1510c5bfb46e07771850d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga6ad4dcc61ec1510c5bfb46e07771850d">&#9670;&nbsp;</a></span>o2_osc_port_free()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__returncodes.html#gae9a85a9a12082ae659af9d047d6d63c9">O2err</a> o2_osc_port_free </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>port_num</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Remove a port receiving OSC messages. </p>
<p >This removes a port created by <a class="el" href="group__oscinterop.html#ga0ec6ca967524276cf0d18c94dcc37268" title="Create a port to receive OSC messages.">o2_osc_port_new</a>. If you want to remove the corresponding service, you must also call <a class="el" href="group__basics.html#ga74e8a97f87c01cf86fe6054097709bff" title="Remove a local service.">o2_service_free</a> with the service name. The port should be the same port passed to <a class="el" href="group__oscinterop.html#ga0ec6ca967524276cf0d18c94dcc37268" title="Create a port to receive OSC messages.">o2_osc_port_new</a>. In the case of TCP, this will close all connections that were <em>accepted</em> from this server port as well as the server port.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">port_num</td><td>The port number that receives OSC messages or that receives connect requests for TCP connections.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="group__returncodes.html#ggae9a85a9a12082ae659af9d047d6d63c9a68055f2c93d5f18c40ce06c0569ab3f6" title="function was successful">O2_SUCCESS</a> if success, <a class="el" href="group__returncodes.html#ggae9a85a9a12082ae659af9d047d6d63c9af3cd38a1ac5bca4865c3f0c7586ab0c8" title="a non-specific error occurred.">O2_FAIL</a> if not. </dd></dl>

</div>
</div>
<a id="ga0ec6ca967524276cf0d18c94dcc37268" name="ga0ec6ca967524276cf0d18c94dcc37268"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga0ec6ca967524276cf0d18c94dcc37268">&#9670;&nbsp;</a></span>o2_osc_port_new()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__returncodes.html#gae9a85a9a12082ae659af9d047d6d63c9">O2err</a> o2_osc_port_new </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>service_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>port_num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>tcp_flag</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a port to receive OSC messages. </p>
<p >OSC messages are converted to O2 messages and directed to the service. E.g. if the service is "maxmsp" and the message address is <code>/foo/x</code>, then the message is directed to and handled by <code>/maxmsp/foo/x</code>. If the #service_name does not exist at any time after calling <a class="el" href="group__oscinterop.html#ga0ec6ca967524276cf0d18c94dcc37268" title="Create a port to receive OSC messages.">o2_osc_port_new</a>, incoming OSC messages will be dropped until the service is available again. Note that this function does not automatically create a service named <code>service_name</code>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">service_name</td><td>The name of the service to which messages are delivered </td></tr>
    <tr><td class="paramname">port_num</td><td>Port number. </td></tr>
    <tr><td class="paramname">tcp_flag</td><td>Be a TCP server for remote clients. Otherwise, use UDP</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="group__returncodes.html#ggae9a85a9a12082ae659af9d047d6d63c9a68055f2c93d5f18c40ce06c0569ab3f6" title="function was successful">O2_SUCCESS</a> if success, <a class="el" href="group__returncodes.html#ggae9a85a9a12082ae659af9d047d6d63c9af3cd38a1ac5bca4865c3f0c7586ab0c8" title="a non-specific error occurred.">O2_FAIL</a> if not. </dd></dl>

</div>
</div>
<a id="ga34537bc20e5ea607f28da63867452284" name="ga34537bc20e5ea607f28da63867452284"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga34537bc20e5ea607f28da63867452284">&#9670;&nbsp;</a></span>o2_osc_time_offset()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t o2_osc_time_offset </td>
          <td>(</td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>offset</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the OSC time offset. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">offset</td><td>the offset between (global) O2 time and OSC time</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the previous offset</dd></dl>
<p>O2 global time should start from 0.0 when the clock is started, whereas OSC time starts at 1 Jan 1900. The offset is the OSC time corresponding to O2 time 0.0. Equivalently, OSC_time = O2_time + offset. </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.2
</small></address>
</body>
</html>
